#!/usr/bin/env bash

UNIT_TEST_LIST_FILE="list_of_tests.sh"

CUR_DEFAULT_PREC_LIST_COPY="F32_F32_F32 BF16_BF16_BF16 BF16_BF16_F32 F32_BF16_F32 BF16_F32_F32 F16_F16_F16 F16_F16_F32 F32_F16_F32 F16_F32_F32 BF8_BF8_BF8 BF8_BF8_F32 F32_BF8_F32 BF8_F32_F32 HF8_HF8_HF8 HF8_HF8_F32 F32_HF8_F32 HF8_F32_F32"
NEW_DEFAULT_PREC_LIST_COPY=$CUR_DEFAULT_PREC_LIST_COPY" F64_F64_F64"
# Adjust copy
for i in `echo unary_copy_eqld.sh`; do sed "s/PREC_LIST=\"${CUR_DEFAULT_PREC_LIST_COPY}\"/PREC_LIST=\"${NEW_DEFAULT_PREC_LIST_COPY}\"/g" -i $i  ;done
for i in `echo unary_copy_gtld.sh`; do sed "s/PREC_LIST=\"${CUR_DEFAULT_PREC_LIST_COPY}\"/PREC_LIST=\"${NEW_DEFAULT_PREC_LIST_COPY}\"/g" -i $i  ;done

CUR_DEFAULT_PREC_LIST_UNARY_SIMPLE="F32_F32_F32 BF16_BF16_F32 F32_BF16_F32 BF16_F32_F32 F16_F16_F32 F32_F16_F32 F16_F32_F32 BF8_BF8_F32 F32_BF8_F32 BF8_F32_F32 HF8_HF8_F32 F32_HF8_F32 HF8_F32_F32"
NEW_DEFAULT_PREC_LIST_UNARY_SIMPLE=$CUR_DEFAULT_PREC_LIST_UNARY_SIMPLE" F64_F64_F64"
# Adjust unary
for i in `cat ${UNIT_TEST_LIST_FILE}`; do sed "s/PREC_LIST=\"${CUR_DEFAULT_PREC_LIST_UNARY_SIMPLE}\"/PREC_LIST=\"${NEW_DEFAULT_PREC_LIST_UNARY_SIMPLE}\"/g" -i $i  ;done

CUR_DEFAULT_PREC_LIST_UNARY_REDUCE="F32 BF16 F16 BF8 HF8"
NEW_DEFAULT_PREC_LIST_UNARY_REDUCE=$CUR_DEFAULT_PREC_LIST_UNARY_REDUCE" F64"

# Adjust reduce
for i in `cat ${UNIT_TEST_LIST_FILE}`; do sed "s/PREC_LIST=\"${CUR_DEFAULT_PREC_LIST_UNARY_REDUCE}\"/PREC_LIST=\"${NEW_DEFAULT_PREC_LIST_UNARY_REDUCE}\"/g" -i $i  ;done

CUR_DEFAULT_PREC_LIST_BINARY_SIMPLE="F32_F32_F32_F32 F32_F32_BF16_F32 F32_BF16_F32_F32 F32_BF16_BF16_F32 BF16_F32_F32_F32 BF16_F32_BF16_F32 BF16_BF16_F32_F32 BF16_BF16_BF16_F32 F32_F32_F16_F32 F32_F16_F32_F32 F32_F16_F16_F32 F16_F32_F32_F32 F16_F32_F16_F32 F16_F16_F32_F32 F16_F16_F16_F32 F32_F32_BF8_F32 F32_BF8_F32_F32 F32_BF8_BF8_F32 BF8_F32_F32_F32 BF8_F32_BF8_F32 BF8_BF8_F32_F32 BF8_BF8_BF8_F32 F32_F32_HF8_F32 F32_HF8_F32_F32 F32_HF8_HF8_F32 HF8_F32_F32_F32 HF8_F32_HF8_F32 HF8_HF8_F32_F32 HF8_HF8_HF8_F32"
NEW_DEFAULT_PREC_LIST_BINARY_SIMPLE=$CUR_DEFAULT_PREC_LIST_BINARY_SIMPLE" F64_F64_F64_F64"
# Adjust binary
for i in `cat ${UNIT_TEST_LIST_FILE}`; do sed "s/PREC_LIST=\"${CUR_DEFAULT_PREC_LIST_BINARY_SIMPLE}\"/PREC_LIST=\"${NEW_DEFAULT_PREC_LIST_BINARY_SIMPLE}\"/g" -i $i  ;done
